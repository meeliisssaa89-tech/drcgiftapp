@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

@layer base {
  :root {
    /* Telegram Mini App Dark Theme */
    --background: 210 20% 6%;
    --foreground: 0 0% 98%;

    --card: 210 18% 10%;
    --card-foreground: 0 0% 98%;
    --card-elevated: 210 16% 14%;

    --popover: 210 18% 10%;
    --popover-foreground: 0 0% 98%;

    --primary: 200 90% 55%;
    --primary-foreground: 0 0% 100%;
    --primary-glow: 200 90% 60%;

    --secondary: 210 16% 18%;
    --secondary-foreground: 0 0% 90%;

    --muted: 210 14% 20%;
    --muted-foreground: 210 10% 55%;

    --accent: 200 90% 55%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 210 14% 18%;
    --input: 210 14% 18%;
    --ring: 200 90% 55%;

    --radius: 1rem;

    /* Custom tokens */
    --crystal-blue: 200 90% 55%;
    --invite-gradient-start: 200 85% 50%;
    --invite-gradient-end: 200 90% 60%;
    --progress-bg: 200 80% 25%;
    --progress-fill: 200 90% 55%;
    --nav-active: 200 90% 55%;
    --nav-inactive: 210 10% 45%;
    --badge-red: 0 72% 51%;
    --gold: 45 93% 58%;
    --silver: 0 0% 75%;
    --bronze: 30 60% 50%;

    --sidebar-background: 210 20% 6%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 200 90% 55%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 210 16% 18%;
    --sidebar-accent-foreground: 0 0% 90%;
    --sidebar-border: 210 14% 18%;
    --sidebar-ring: 200 90% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply h-full;
  }

  body {
    @apply min-h-full;
  }

  #root {
    @apply min-h-full;
    /* Enable scrolling */
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    -webkit-tap-highlight-color: transparent;
    overscroll-behavior: none;
    /* Support for Telegram safe areas */
    padding-top: env(safe-area-inset-top, 0);
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
}

@layer components {
  .card-telegram {
    @apply bg-card rounded-2xl p-4;
  }

  .card-elevated {
    background: hsl(var(--card-elevated));
    @apply rounded-2xl p-4;
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground font-semibold rounded-xl py-3 px-6 
           transition-all duration-200 active:scale-[0.98];
  }

  .btn-outline {
    @apply border-2 border-white/30 text-white font-semibold rounded-full py-3 px-8
           transition-all duration-200 active:scale-[0.98] bg-transparent;
  }

  .crystal-badge {
    @apply inline-flex items-center gap-1.5 bg-secondary rounded-full px-3 py-1.5 text-sm font-medium;
    color: hsl(var(--crystal-blue));
  }

  .progress-bar {
    @apply h-1.5 rounded-full overflow-hidden;
    background: hsl(var(--progress-bg) / 0.3);
  }

  .progress-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
    background: hsl(var(--progress-fill));
  }

  .invite-gradient {
    background: linear-gradient(
      135deg,
      hsl(var(--invite-gradient-start)) 0%,
      hsl(var(--invite-gradient-end)) 100%
    );
  }

  .tab-active {
    @apply bg-secondary text-foreground;
  }

  .tab-inactive {
    @apply bg-transparent text-muted-foreground;
  }

  .nav-item-active {
    color: hsl(var(--nav-active));
  }

  .nav-item-inactive {
    color: hsl(var(--nav-inactive));
  }

  .spin-card {
    @apply bg-card-elevated rounded-2xl flex flex-col items-center justify-center
           transition-all duration-300;
    min-width: 140px;
    height: 180px;
  }

  .spin-card-selected {
    @apply ring-2 ring-primary scale-105;
  }

  .bet-btn {
    @apply rounded-xl py-2.5 px-4 font-medium text-sm transition-all duration-200
           flex items-center gap-1.5;
  }

  .bet-btn-active {
    @apply bg-primary/20 border-2 border-primary text-primary;
  }

  .bet-btn-inactive {
    @apply bg-secondary border-2 border-transparent text-muted-foreground;
  }

  .task-card {
    @apply bg-card rounded-2xl p-4 space-y-3;
  }

  .prize-card {
    @apply bg-card rounded-xl p-3 flex flex-col items-center gap-2;
    min-width: 100px;
  }

  .leaderboard-row {
    @apply flex items-center gap-3 py-3 border-b border-border/50 last:border-0;
  }

  .avatar-ring {
    @apply rounded-full ring-2 ring-muted;
  }
}

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 20px);
  }

  .animate-spin-slow {
    animation: spin-slow 20s linear infinite;
  }

  @keyframes spin-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .animate-slide-in {
    animation: slide-in 0.3s ease-out;
  }

  @keyframes slide-in {
    from { transform: translateX(20px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  .animate-bounce-in {
    animation: bounce-in 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes bounce-in {
    0% { transform: scale(0.3); opacity: 0; }
    50% { transform: scale(1.05); }
    70% { transform: scale(0.95); }
    100% { transform: scale(1); opacity: 1; }
  }

  .delay-100 {
    animation-delay: 100ms;
  }

  .delay-200 {
    animation-delay: 200ms;
  }

  .delay-300 {
    animation-delay: 300ms;
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px hsl(var(--primary) / 0.3); }
    50% { box-shadow: 0 0 40px hsl(var(--primary) / 0.5); }
  }
}
